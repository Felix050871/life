DROP TABLE IF EXISTS sede CASCADE;
DROP TABLE IF EXISTS user CASCADE;
DROP TABLE IF EXISTS presidio_coverage CASCADE;
DROP TABLE IF EXISTS shift CASCADE;
DROP TABLE IF EXISTS leave_request CASCADE;
DROP TABLE IF EXISTS shift_template CASCADE;
DROP TABLE IF EXISTS work_schedule CASCADE;
DROP TABLE IF EXISTS attendance_event CASCADE;
DROP TABLE IF EXISTS reperibilita_shift CASCADE;
DROP TABLE IF EXISTS intervention CASCADE;
DROP TABLE IF EXISTS reperibilita_template CASCADE;
DROP TABLE IF EXISTS reperibilita_intervention CASCADE;
DROP TABLE IF EXISTS user_role CASCADE;
DROP TABLE IF EXISTS user_sede_association CASCADE;
DROP TABLE IF EXISTS holiday CASCADE;
DROP TABLE IF EXISTS reperibilita_coverage CASCADE;
DROP TABLE IF EXISTS internal_message CASCADE;
DROP TABLE IF EXISTS presidio_coverage_template CASCADE;
DROP TABLE IF EXISTS password_reset_token CASCADE;
DROP TABLE IF EXISTS leave_type CASCADE;
DROP TABLE IF EXISTS expense_category CASCADE;
DROP TABLE IF EXISTS expense_report CASCADE;
DROP TABLE IF EXISTS overtime_request CASCADE;
DROP TABLE IF EXISTS overtime_type CASCADE;
DROP TABLE IF EXISTS aci_table CASCADE;
DROP TABLE IF EXISTS mileage_request CASCADE;

CREATE TABLE aci_table (\n    id INTEGER NOT NULL,\n    tipologia VARCHAR(100) NOT NULL,\n    marca VARCHAR(100) NOT NULL,\n    modello VARCHAR(200) NOT NULL,\n    costo_km DECIMAL NOT NULL,\n    fringe_benefit_10 DECIMAL,\n    fringe_benefit_25 DECIMAL,\n    fringe_benefit_30 DECIMAL,\n    fringe_benefit_50 DECIMAL,\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP\n);
CREATE TABLE attendance_event (\n    id INTEGER NOT NULL,\n    user_id INTEGER NOT NULL,\n    date DATE NOT NULL,\n    event_type VARCHAR(20) NOT NULL,\n    timestamp TIMESTAMP NOT NULL,\n    notes TEXT,\n    shift_status VARCHAR(20),\n    created_at TIMESTAMP,\n    sede_id INTEGER\n);
CREATE TABLE expense_category (\n    id INTEGER NOT NULL,\n    name VARCHAR(100) NOT NULL,\n    description VARCHAR(255),\n    is_active BOOLEAN,\n    created_at TIMESTAMP,\n    created_by INTEGER NOT NULL\n);
CREATE TABLE expense_report (\n    id INTEGER NOT NULL,\n    employee_id INTEGER NOT NULL,\n    expense_date DATE NOT NULL,\n    description TEXT NOT NULL,\n    amount DECIMAL NOT NULL,\n    category_id INTEGER NOT NULL,\n    receipt_filename VARCHAR(255),\n    status VARCHAR(20) NOT NULL,\n    approved_by INTEGER,\n    approved_at TIMESTAMP,\n    approval_comment TEXT,\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP\n);
CREATE TABLE holiday (\n    id INTEGER NOT NULL,\n    name VARCHAR(100) NOT NULL,\n    month INTEGER NOT NULL,\n    day INTEGER NOT NULL,\n    is_active BOOLEAN NOT NULL,\n    description VARCHAR(200),\n    created_at TIMESTAMP,\n    created_by INTEGER NOT NULL,\n    sede_id INTEGER\n);
CREATE TABLE internal_message (\n    id INTEGER NOT NULL,\n    recipient_id INTEGER NOT NULL,\n    sender_id INTEGER,\n    title VARCHAR(200) NOT NULL,\n    message TEXT NOT NULL,\n    message_type VARCHAR(50),\n    is_read BOOLEAN,\n    related_leave_request_id INTEGER,\n    created_at TIMESTAMP\n);
CREATE TABLE intervention (\n    id INTEGER NOT NULL,\n    user_id INTEGER NOT NULL,\n    start_datetime TIMESTAMP NOT NULL,\n    end_datetime TIMESTAMP,\n    description TEXT,\n    priority VARCHAR(10) NOT NULL,\n    is_remote BOOLEAN NOT NULL,\n    created_at TIMESTAMP\n);
CREATE TABLE leave_request (\n    id INTEGER NOT NULL,\n    user_id INTEGER NOT NULL,\n    start_date DATE NOT NULL,\n    end_date DATE NOT NULL,\n    leave_type VARCHAR(50) NOT NULL,\n    reason TEXT,\n    status VARCHAR(20),\n    approved_by INTEGER,\n    approved_at TIMESTAMP,\n    created_at TIMESTAMP,\n    start_time TIME,\n    end_time TIME,\n    leave_type_id INTEGER\n);
CREATE TABLE leave_type (\n    id INTEGER NOT NULL,\n    name VARCHAR(100) NOT NULL,\n    description TEXT,\n    requires_approval BOOLEAN,\n    is_active BOOLEAN,\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP\n);
CREATE TABLE mileage_request (\n    id INTEGER NOT NULL,\n    user_id INTEGER NOT NULL,\n    travel_date DATE NOT NULL,\n    route_addresses JSON NOT NULL,\n    total_km DOUBLE PRECISION NOT NULL,\n    calculated_km DOUBLE PRECISION,\n    is_km_manual BOOLEAN,\n    vehicle_id INTEGER,\n    vehicle_description VARCHAR(200),\n    cost_per_km DOUBLE PRECISION NOT NULL,\n    total_amount DOUBLE PRECISION NOT NULL,\n    purpose TEXT NOT NULL,\n    notes TEXT,\n    status VARCHAR(20) NOT NULL,\n    approved_by INTEGER,\n    approved_at TIMESTAMP,\n    approval_comment TEXT,\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP\n);
CREATE TABLE overtime_request (\n    id INTEGER NOT NULL,\n    employee_id INTEGER NOT NULL,\n    overtime_date DATE NOT NULL,\n    start_time TIME NOT NULL,\n    end_time TIME NOT NULL,\n    motivation TEXT NOT NULL,\n    overtime_type_id INTEGER NOT NULL,\n    status VARCHAR(20) NOT NULL,\n    approved_by INTEGER,\n    approved_at TIMESTAMP,\n    approval_comment TEXT,\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP\n);
CREATE TABLE overtime_type (\n    id INTEGER NOT NULL,\n    name VARCHAR(100) NOT NULL,\n    description TEXT,\n    hourly_rate_multiplier DOUBLE PRECISION,\n    active BOOLEAN,\n    created_at TIMESTAMP\n);
CREATE TABLE password_reset_token (\n    id INTEGER NOT NULL,\n    user_id INTEGER NOT NULL,\n    token VARCHAR(100) NOT NULL,\n    expires_at TIMESTAMP NOT NULL,\n    used BOOLEAN NOT NULL,\n    created_at TIMESTAMP\n);
CREATE TABLE presidio_coverage (\n    id INTEGER NOT NULL,\n    day_of_week INTEGER NOT NULL,\n    start_time TIME NOT NULL,\n    end_time TIME NOT NULL,\n    required_roles TEXT NOT NULL,\n    description VARCHAR(200),\n    is_active BOOLEAN,\n    start_date DATE NOT NULL,\n    end_date DATE NOT NULL,\n    created_by INTEGER NOT NULL,\n    created_at TIMESTAMP,\n    template_id INTEGER,\n    role_count INTEGER,\n    break_start TIME,\n    break_end TIME\n);
CREATE TABLE presidio_coverage_template (\n    id INTEGER NOT NULL,\n    name VARCHAR(100) NOT NULL,\n    start_date DATE NOT NULL,\n    end_date DATE NOT NULL,\n    description VARCHAR(200),\n    is_active BOOLEAN,\n    created_by INTEGER NOT NULL,\n    created_at TIMESTAMP,\n    updated_at TIMESTAMP,\n    sede_id INTEGER\n);
CREATE TABLE reperibilita_coverage (\n    id INTEGER NOT NULL,\n    day_of_week INTEGER NOT NULL,\n    start_time TIME NOT NULL,\n    end_time TIME NOT NULL,\n    required_roles TEXT NOT NULL,\n    description VARCHAR(200),\n    is_active BOOLEAN,\n    start_date DATE NOT NULL,\n    end_date DATE NOT NULL,\n    created_by INTEGER NOT NULL,\n    created_at TIMESTAMP,\n    sedi_ids TEXT\n);
CREATE TABLE reperibilita_intervention (\n    id INTEGER NOT NULL,\n    user_id INTEGER NOT NULL,\n    shift_id INTEGER,\n    start_datetime TIMESTAMP NOT NULL,\n    end_datetime TIMESTAMP,\n    description TEXT,\n    priority VARCHAR(10) NOT NULL,\n    is_remote BOOLEAN NOT NULL,\n    created_at TIMESTAMP\n);
CREATE TABLE reperibilita_shift (\n    id INTEGER NOT NULL,\n    user_id INTEGER NOT NULL,\n    date DATE NOT NULL,\n    start_time TIME NOT NULL,\n    end_time TIME NOT NULL,\n    description VARCHAR(200),\n    created_at TIMESTAMP,\n    created_by INTEGER NOT NULL\n);
CREATE TABLE reperibilita_template (\n    id INTEGER NOT NULL,\n    name VARCHAR(100) NOT NULL,\n    start_date DATE NOT NULL,\n    end_date DATE NOT NULL,\n    description TEXT,\n    created_by INTEGER NOT NULL,\n    created_at TIMESTAMP\n);
CREATE TABLE sede (\n    id INTEGER NOT NULL,\n    name VARCHAR(100) NOT NULL,\n    address VARCHAR(200),\n    description TEXT,\n    active BOOLEAN NOT NULL,\n    created_at TIMESTAMP,\n    tipologia VARCHAR(20)\n);
CREATE TABLE shift (\n    id INTEGER NOT NULL,\n    user_id INTEGER NOT NULL,\n    date DATE NOT NULL,\n    start_time TIME NOT NULL,\n    end_time TIME NOT NULL,\n    shift_type VARCHAR(50) NOT NULL,\n    created_at TIMESTAMP,\n    created_by INTEGER NOT NULL\n);
CREATE TABLE shift_template (\n    id INTEGER NOT NULL,\n    name VARCHAR(100) NOT NULL,\n    start_date DATE NOT NULL,\n    end_date DATE NOT NULL,\n    description TEXT,\n    created_by INTEGER NOT NULL,\n    created_at TIMESTAMP\n);
CREATE TABLE user (\n    id INTEGER NOT NULL,\n    username VARCHAR(80) NOT NULL,\n    email VARCHAR(120) NOT NULL,\n    password_hash VARCHAR(256) NOT NULL,\n    role VARCHAR(50) NOT NULL,\n    first_name VARCHAR(100) NOT NULL,\n    last_name VARCHAR(100) NOT NULL,\n    sede_id INTEGER,\n    active BOOLEAN,\n    part_time_percentage DOUBLE PRECISION,\n    created_at TIMESTAMP,\n    all_sedi BOOLEAN,\n    work_schedule_id INTEGER,\n    aci_vehicle_id INTEGER\n);
CREATE TABLE user_role (\n    id INTEGER NOT NULL,\n    name VARCHAR(50) NOT NULL,\n    display_name VARCHAR(100) NOT NULL,\n    description TEXT,\n    permissions JSON,\n    active BOOLEAN,\n    created_at TIMESTAMP\n);
CREATE TABLE user_sede_association (\n    user_id INTEGER NOT NULL,\n    sede_id INTEGER NOT NULL\n);
CREATE TABLE work_schedule (\n    id INTEGER NOT NULL,\n    sede_id INTEGER NOT NULL,\n    name VARCHAR(100) NOT NULL,\n    start_time TIME,\n    end_time TIME,\n    description TEXT,\n    active BOOLEAN NOT NULL,\n    created_at TIMESTAMP,\n    days_of_week JSON,\n    start_time_min TIME,\n    start_time_max TIME,\n    end_time_min TIME,\n    end_time_max TIME\n);
